meta {
  name: -events--eventId-
  type: http
  seq: 1
}

get {
  url: {{host}}/events/:eventId
  body: none
  auth: none
}

params:path {
  eventId: 1
}

script:pre-request {
  // Pobierz body odpowiedzi
  var responseBody = bru.response.body;
  
  // Parsuj body do obiektu JSON
  var responseJson = JSON.parse(responseBody);
  
  // Sprawdź, czy istnieje pole 'items' w odpowiedzi i czy zawiera dane
  if (responseJson.items && responseJson.items.length > 0) {
      // Pobierz listę eventId z pola 'items'
      var eventIdsList = responseJson.items.map(item => item.eventId);
      
      // Losuj indeks z listy
      var randomIndex = Math.floor(Math.random() * eventIdsList.length);
      
      // Pobierz losowe eventId
      var randomEventId = eventIdsList[randomIndex];
      
      // Zapisz losowe eventId do środowiska
      bru.setEnvVar("randomEventId", randomEventId);
      
      console.log("Losowy eventId: " + randomEventId);
  } else {
      console.log("Pole 'items' jest puste lub nie istnieje");
  }
  
}
